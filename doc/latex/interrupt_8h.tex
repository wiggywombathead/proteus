\hypertarget{interrupt_8h}{}\section{/home/tom/compsci/thirdyear/cs310/include/kernel/interrupt.h File Reference}
\label{interrupt_8h}\index{/home/tom/compsci/thirdyear/cs310/include/kernel/interrupt.h@{/home/tom/compsci/thirdyear/cs310/include/kernel/interrupt.h}}


Code to implement interrupts.  


{\ttfamily \#include $<$kernel/peripheral.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structinterrupt__register}{interrupt\+\_\+register}}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{interrupt_8h_a4e6af65cda2fad87ff24dec3aaaf4288}\label{interrupt_8h_a4e6af65cda2fad87ff24dec3aaaf4288}} 
\#define {\bfseries N\+U\+M\+\_\+\+I\+R\+QS}~72
\item 
\mbox{\Hypertarget{interrupt_8h_a7ebd4449434e148a098f6a4ab80522f9}\label{interrupt_8h_a7ebd4449434e148a098f6a4ab80522f9}} 
\#define {\bfseries I\+R\+Q\+\_\+\+I\+S\+\_\+\+B\+A\+S\+IC}(x)~(( x $>$= 64 ))
\item 
\mbox{\Hypertarget{interrupt_8h_a9b1dc78a8df5cfbf40b14051416f956c}\label{interrupt_8h_a9b1dc78a8df5cfbf40b14051416f956c}} 
\#define {\bfseries I\+R\+Q\+\_\+\+I\+S\+\_\+\+G\+P\+U1}(x)~(( x $<$ 32 ))
\item 
\mbox{\Hypertarget{interrupt_8h_a20b3a95956a3c63d21e6d9502162da54}\label{interrupt_8h_a20b3a95956a3c63d21e6d9502162da54}} 
\#define {\bfseries I\+R\+Q\+\_\+\+I\+S\+\_\+\+G\+P\+U2}(x)~(( x $>$= 32 \&\& x $<$ 64 ))
\item 
\#define {\bfseries I\+R\+Q\+\_\+\+I\+S\+\_\+\+P\+E\+N\+D\+I\+NG}(registers,  num)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{interrupt_8h_a4fc420522c9aa0d909545a8345370f1a}\label{interrupt_8h_a4fc420522c9aa0d909545a8345370f1a}} 
typedef void($\ast$ {\bfseries interrupt\+\_\+handler}) (void)
\item 
\mbox{\Hypertarget{interrupt_8h_ac98d636f574cd6d60053b02ebfc55406}\label{interrupt_8h_ac98d636f574cd6d60053b02ebfc55406}} 
typedef void($\ast$ {\bfseries interrupt\+\_\+clearer}) (void)
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{interrupt_8h_abc6126af1d45847bc59afa0aa3216b04}\label{interrupt_8h_abc6126af1d45847bc59afa0aa3216b04}} 
enum \{ \newline
{\bfseries I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE} = P\+E\+R\+I\+P\+H\+E\+R\+A\+L\+\_\+\+B\+A\+SE + I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+O\+F\+F\+S\+ET, 
{\bfseries I\+R\+Q\+\_\+\+P\+E\+N\+D\+I\+NG} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x200), 
{\bfseries I\+R\+Q\+\_\+\+G\+P\+U\+\_\+\+P\+E\+N\+D\+I\+N\+G1} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x204), 
{\bfseries I\+R\+Q\+\_\+\+G\+P\+U\+\_\+\+P\+E\+N\+D\+I\+N\+G2} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x208), 
\newline
{\bfseries F\+I\+Q\+\_\+\+C\+O\+N\+T\+R\+OL} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x20c), 
{\bfseries I\+R\+Q\+\_\+\+G\+P\+U\+\_\+\+E\+N\+A\+B\+L\+E1} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x210), 
{\bfseries I\+R\+Q\+\_\+\+G\+P\+U\+\_\+\+E\+N\+A\+B\+L\+E2} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x214), 
{\bfseries I\+R\+Q\+\_\+\+E\+N\+A\+B\+LE} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x218), 
\newline
{\bfseries I\+R\+Q\+\_\+\+G\+P\+U\+\_\+\+D\+I\+S\+A\+B\+L\+E1} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x21c), 
{\bfseries I\+R\+Q\+\_\+\+G\+P\+U\+\_\+\+D\+I\+S\+A\+B\+L\+E2} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x220), 
{\bfseries I\+R\+Q\+\_\+\+D\+I\+S\+A\+B\+LE} = (I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+B\+A\+SE + 0x224)
 \}
\item 
\mbox{\Hypertarget{interrupt_8h_a8f5e08600f0aaff3cb4081e983b7b695}\label{interrupt_8h_a8f5e08600f0aaff3cb4081e983b7b695}} 
enum {\bfseries irq\+\_\+no} \{ {\bfseries S\+Y\+S\+\_\+\+T\+I\+M\+ER} = 1, 
{\bfseries U\+S\+B\+\_\+\+C\+O\+N\+T\+R\+O\+L\+L\+ER} = 9, 
{\bfseries A\+R\+M\+\_\+\+T\+I\+M\+ER} = 64
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{interrupt_8h_a27222af97eb47afcf4bd767ef6e935dc}{interrupts\+\_\+init}} (void)
\item 
void \mbox{\hyperlink{interrupt_8h_a444e9b43a80af09048d527cf0f2d77d7}{register\+\_\+irq\+\_\+handler}} (enum irq\+\_\+no, interrupt\+\_\+handler, interrupt\+\_\+clearer)
\item 
\mbox{\Hypertarget{interrupt_8h_a11978bd1108aa0ea8b9b827fceef488a}\label{interrupt_8h_a11978bd1108aa0ea8b9b827fceef488a}} 
\+\_\+\+\_\+inline\+\_\+\+\_\+ int {\bfseries I\+N\+T\+E\+R\+R\+U\+P\+T\+S\+\_\+\+E\+N\+A\+B\+L\+ED} (void)
\item 
\mbox{\Hypertarget{interrupt_8h_a0bf890dae10d2908e9faac143b49540f}\label{interrupt_8h_a0bf890dae10d2908e9faac143b49540f}} 
\+\_\+\+\_\+inline\+\_\+\+\_\+ void {\bfseries E\+N\+A\+B\+L\+E\+\_\+\+I\+N\+T\+E\+R\+R\+U\+P\+TS} (void)
\item 
\mbox{\Hypertarget{interrupt_8h_ab3c1abeefef08f622f7216545f006c48}\label{interrupt_8h_ab3c1abeefef08f622f7216545f006c48}} 
\+\_\+\+\_\+inline\+\_\+\+\_\+ void {\bfseries D\+I\+S\+A\+B\+L\+E\+\_\+\+I\+N\+T\+E\+R\+R\+U\+P\+TS} (void)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Code to implement interrupts. 



\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{interrupt_8h_ad020ff98b42a9462614e8500fdf96442}\label{interrupt_8h_ad020ff98b42a9462614e8500fdf96442}} 
\index{interrupt.h@{interrupt.h}!IRQ\_IS\_PENDING@{IRQ\_IS\_PENDING}}
\index{IRQ\_IS\_PENDING@{IRQ\_IS\_PENDING}!interrupt.h@{interrupt.h}}
\subsubsection{\texorpdfstring{IRQ\_IS\_PENDING}{IRQ\_IS\_PENDING}}
{\footnotesize\ttfamily \#define I\+R\+Q\+\_\+\+I\+S\+\_\+\+P\+E\+N\+D\+I\+NG(\begin{DoxyParamCaption}\item[{}]{registers,  }\item[{}]{num }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{((IRQ\_IS\_BASIC(num) \&\& ((1 << (num - 64)) \& registers->irq\_basic\_pending)) || \(\backslash\)}
\DoxyCodeLine{     (IRQ\_IS\_GPU1(num) \&\& ((1 << (num)) \& registers->irq\_gpu\_pending\_1)) || \(\backslash\)}
\DoxyCodeLine{     (IRQ\_IS\_GPU2(num) \&\& ((1 << (num - 32)) \& registers->irq\_gpu\_pending\_2)))}

\end{DoxyCode}


\subsection{Function Documentation}
\mbox{\Hypertarget{interrupt_8h_a27222af97eb47afcf4bd767ef6e935dc}\label{interrupt_8h_a27222af97eb47afcf4bd767ef6e935dc}} 
\index{interrupt.h@{interrupt.h}!interrupts\_init@{interrupts\_init}}
\index{interrupts\_init@{interrupts\_init}!interrupt.h@{interrupt.h}}
\subsubsection{\texorpdfstring{interrupts\_init()}{interrupts\_init()}}
{\footnotesize\ttfamily void interrupts\+\_\+init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Initialise interrupts \mbox{\Hypertarget{interrupt_8h_a444e9b43a80af09048d527cf0f2d77d7}\label{interrupt_8h_a444e9b43a80af09048d527cf0f2d77d7}} 
\index{interrupt.h@{interrupt.h}!register\_irq\_handler@{register\_irq\_handler}}
\index{register\_irq\_handler@{register\_irq\_handler}!interrupt.h@{interrupt.h}}
\subsubsection{\texorpdfstring{register\_irq\_handler()}{register\_irq\_handler()}}
{\footnotesize\ttfamily void register\+\_\+irq\+\_\+handler (\begin{DoxyParamCaption}\item[{enum irq\+\_\+no}]{num,  }\item[{interrupt\+\_\+handler}]{handler,  }\item[{interrupt\+\_\+clearer}]{clearer }\end{DoxyParamCaption})}

Register handler for I\+RQ 
\begin{DoxyParams}{Parameters}
{\em num} & The I\+RQ number to register \\
\hline
{\em handler} & The handler to deal with this I\+RQ \\
\hline
{\em clearer} & The code to cleanup after the handler is done \\
\hline
\end{DoxyParams}
